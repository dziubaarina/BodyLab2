<!-- Ten plik jest inkludowany przez booking.html -->
<div class="col">
    <!-- Cały kafelek jest wyszarzony, jeśli jest pełny -->
    <div class="card h-100 shadow-sm {% if session.is_full %} bg-light text-muted border-secondary{% endif %}">
        <div class="card-body">
            <!-- Data i Godzina -->
            <div class="d-flex justify-content-between mb-2">
                <span class="fw-bold fs-5 text-dark">{{ session.date.strftime('%A, %d.%m') }}</span>
                <span class="badge bg-dark fs-6">{{ session.start_time.strftime('%H:%M') }}</span>
            </div>

            <!-- Tytuł -->
            <h5 class="card-title fs-4">{{ session.title }}</h5>

            <!-- Trener i Cena -->
            <h6 class="card-subtitle mb-2 text-muted">
                <i class="fas fa-user"></i>
                <a href="{{ url_for('trainer_profile', trainer_id=session.trainer.id) }}" class="text-decoration-none">
                    {{ session.trainer.username }}
                </a>
            </h6>
            <h6 class="card-subtitle mb-3 text-muted">
                <i class="fas fa-dollar-sign"></i>
                {{ session.price }} zł
            </h6>

            <!-- Opis (skrócony) -->
            <p class="card-text">{{ session.description | truncate(80, True) }}</p>
        </div>

        <div class="card-footer bg-white border-0 p-3">
            <div class="d-flex justify-content-between align-items-center">
                <!-- Licznik miejsc -->
                <span class="badge {% if session.is_full %}bg-danger{% else %}bg-success{% endif %} fs-6">
                    <i class="fas fa-users"></i>
                    {{ session.current_participants }} / {{ session.max_participants }}
                </span>

                <!-- Formularz rezerwacji -->
                <form method="POST" action="{{ url_for('book_session') }}" class="d-inline">
                    <input type="hidden" name="session_id" value="{{ session.id }}">

                    {% if session.is_full %}
                        <button class="btn btn-secondary" disabled>Miejsca zajęte</button>
                    {% elif session.id in user_booked_session_ids %}
                        <button class="btn btn-success" disabled><i class="fas fa-check"></i> Zapisano</button>
                    {% else %}
                        <button type="submit" class="btn btn-primary">Zapisz się</button>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
</div>