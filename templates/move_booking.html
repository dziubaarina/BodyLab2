{% extends "base.html" %}

{% block title %}Przenieś Rezerwację{% endblock %}

{% block content %}
<h1 class="h2 mb-4">Przenieś Rezerwację</h1>

<div class="alert alert-warning">
    <p class="mb-1"><strong>Przenosisz użytkownika:</strong> {{ user.username }} ({{ user.email }})</p>
    <p class="mb-0"><strong>Z zajęć:</strong> {{ session.title }} ({{ session.date.strftime('%Y-%m-%d') }})</p>
</div>

<form method="POST" action="">
    {{ form.hidden_tag() }}

    <div class="mb-3">
        {{ form.new_session.label(class="form-label") }}
        {{ form.new_session(class="form-select") }}
        {% if not form.new_session.choices %}
            <div class="form-text text-danger">Brak dostępnych zajęć, na które można przenieść rezerwację.</div>
        {% endif %}
        {% for error in form.new_session.errors %}
            <span class="text-danger small">{{ error }}</span>
        {% endfor %}
    </div>

    <hr class="my-4">

    <div class="d-flex justify-content-end gap-2">
        <a href="{{ url_for('manage_session', session_id=session.id) }}" class="btn btn-secondary">Anuluj</a>
        <button type="submit" class="btn btn-primary" {% if not form.new_session.choices %}disabled{% endif %}>
            Potwierdź Przeniesienie
        </button>
    </div>
</form>

{% endblock %}